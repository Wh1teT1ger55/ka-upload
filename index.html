<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LMG Klassenarbeiten</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <div id="logo-schrift">
        <img src="https://www.lmg-remseck.de/sites/default/files/logo/lmg-logo-42.png" id="logo">
        <h1 id="title">Klassenarbeiten des LMG</h1>
    </div>

    <img src="https://www.lmg-remseck.de/themes/lmgbootstrap/bg.jpg" id="lmg-bild">
    <section id="main-content">
    <h1>Über diese Seite</h1>
    <p>
       Diese Seite wurde von Schülern des LMGs entworfen und beinhaltet sämtliche alte Klassenarbeiten von Lehrern. 
       Manche Arbeiten werden von Lehrern mehrmals verwendet, darum können diese teilweise hilfreich für kommende Arbeiten sein, 
       wobei nicht garantiert werden kann, dass die Arbeiten auf dieser Website genau so wieder drankommen werden. 
       Sofern man Schüler des LMGs ist und eine Klassenarbeit zuhause hat, die noch nicht auf der Website zu finden ist, dann kann diese hier hochgeladen werden.
    </p>
    <h1>Klasse:</h1>
    <p>
        <label><input type="radio" name="klasse" class="klasse" value="k5">5</label>
        <label><input type="radio" name="klasse" class="klasse" value="k6">6</label>
        <label><input type="radio" name="klasse" class="klasse" value="k7">7</label>
        <label><input type="radio" name="klasse" class="klasse" value="k8">8</label>
        <label><input type="radio" name="klasse" class="klasse" value="k9">9</label>
        <label><input type="radio" name="klasse" class="klasse" value="k10">10</label>
    </p>

    <h1>Fach:</h1>
    <p>
        <label><input type="checkbox" class="fach" value="mat">Mathe</label>
        <label><input type="checkbox" class="fach" value="deu">Deutsch</label>
        <label><input type="checkbox" class="fach" value="eng">Englisch</label>
        <label><input type="checkbox" class="fach" value="lat">Latein</label>
        <label><input type="checkbox" class="fach" value="fra">Franz</label>
        <label><input type="checkbox" class="fach" value="spa">Spanisch</label>
        <label><input type="checkbox" class="fach" value="nwt">NWT</label>
        <label><input type="checkbox" class="fach" value="phy">Physik</label>
        <label><input type="checkbox" class="fach" value="che">Chemie</label>
        <label><input type="checkbox" class="fach" value="bio">Bio</label>
        <label><input type="checkbox" class="fach" value="geo">Geo</label>
        <label><input type="checkbox" class="fach" value="wbs">WBS</label>
        <label><input type="checkbox" class="fach" value="gk">GK</label>
        <label><input type="checkbox" class="fach" value="gesch">Geschichte</label>
    </p>

    <h1>UPLOAD YOUR FILES HERE!</h1>
    <form action="" method="post" enctype="multipart/form-data">
        <label for="document">Document</label>
        <input type="file" name="document">
        <button>Submit</button>
    </form>

    <h1>Arbeiten:</h1>
    <div id="texte">
        <p class="k5 mat hidden" name="arbeit" data-lehrer="piller" data-thema="Thema1"><a href="/C:/Users/lukas/Documents/Schule/Englisch/fertig/Tyroller-Lukas-Englisch-Workbook p.45.pdf" target="_blank">Test-Datei</a></p>
        <p class="k5 deu hidden" name="arbeit" data-lehrer="hohn" data-thema="Thema2">Test 2</p>
        <p class="k5 eng hidden" name="arbeit" data-lehrer="bauer1" data-thema="Thema3">Test 3</p>
        <p class="k5 eng hidden" name="arbeit" data-lehrer="bauer1" data-thema="Thema4">Test 4</p>
        <p class="k10 mat hidden" name="arbeit" data-lehrer="bauer2" data-thema="Thema5">Test 5</p>
        <p class="k10 deu hidden" name="arbeit" data-lehrer="piller" data-thema="Thema6">Test 6</p>
        <p class="k6 fra hidden" name="arbeit" data-lehrer="hohn" data-thema="Thema7">Test 7</p>
    </div>
    </section>
    <script>
        const klasseRadios = document.querySelectorAll('.klasse');
        const fachCheckboxes = document.querySelectorAll('.fach');
        const texte = document.querySelectorAll('#texte p');

        let aktiveKlasse = null;

        const lehrerMap = {
            "piller": "Herr Piller",
            "hohn": "Frau Hohn",
            "bauer1": "Herr Bauer (der Alte)",
            "bauer2": "Herr Bauer (der Neue)"
        }

        // Klassen-Filter (erster Schritt)
        klasseRadios.forEach(radio => {
            radio.addEventListener('change', () => {
            aktiveKlasse = radio.value;
            updateAnzeige();
            });
        });

        // Fächer-Filter (zweiter Schritt)
        fachCheckboxes.forEach(cb => {
            cb.addEventListener('change', updateAnzeige);
        });
        
        function updateAnzeige() {
            const aktiveFaecher = Array.from(fachCheckboxes)
            .filter(cb => cb.checked)
            .map(cb => cb.value);

            document.querySelectorAll('.arbeit-wrapper').forEach(el => el.remove());

            texte.forEach(p => {
                const passtZurKlasse = aktiveKlasse && p.classList.contains(aktiveKlasse);
                const passtZuFach = aktiveFaecher.length === 0 || aktiveFaecher.some(fach => p.classList.contains(fach));
                p.classList.add('hidden');

                if (passtZurKlasse && passtZuFach) {
                    const wrapper = document.createElement("div");
                    wrapper.classList.add("arbeit-wrapper");

                    const lehrer = document.createElement("p");
                    const thema = document.createElement("p");
                    lehrer.classList.add("beschreibung");
                    thema.classList.add("beschreibung");
                    lehrer.textContent = "Lehrer: " + (lehrerMap[p.getAttribute("data-lehrer")] || "unbekannt");
                    thema.textContent = "Thema: " + (p.getAttribute("data-thema") || "unbekannt");

                    const clone = p.cloneNode(true);
                    clone.classList.remove("hidden");

                    wrapper.appendChild(clone);
                    wrapper.appendChild(lehrer);
                    wrapper.appendChild(thema);
                    p.parentElement.appendChild(wrapper);
                } 
            });
        }
  </script>
</body>
</html>
