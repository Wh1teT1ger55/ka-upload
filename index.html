<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LMG Klassenarbeiten</title>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@uploadcare/file-uploader@1/web/uc-file-uploader-regular.min.css">
</head>
<body>

    <h2 id="title">Lise Meitner Gymansium</h2>
    <!--Wie es scheint ist das Menu nicht von Nöten, ich habs jetzt aber erst mal drin gelassen-->
    <div class="container">
        <ul id="main">
            <li><a href="#fach">Fächer</a></li>
            <li><a href="#lehrer">Lehrer</a></li>
        </ul>
    </div>
    
    <h2>Über diese Seite</h2>
    <p>
       Diese Seite wurde von Schülern des LMGs entworfen und beinhaltet sämtliche alte Klassenarbeiten von Lehrern. 
       Sofern man eine Klassenarbeit der Website hinzufügen will, muss man sich registrieren mit einem Code den man 
       nur an der Schule bekommt (anzusprechenden Schüler: )
    </p>
    <h3>Klasse:</h3>
    <p>
        <label><input type="radio" name="klasse" class="klasse" value="k5">5</label>
        <label><input type="radio" name="klasse" class="klasse" value="k6">6</label>
        <label><input type="radio" name="klasse" class="klasse" value="k7">7</label>
        <label><input type="radio" name="klasse" class="klasse" value="k8">8</label>
        <label><input type="radio" name="klasse" class="klasse" value="k9">9</label>
        <label><input type="radio" name="klasse" class="klasse" value="k10">10</label>
    </p>

    <h3>Fach:</h3>
    <p>
        <label><input type="checkbox" class="fach" value="mat">Mathe</label>
        <label><input type="checkbox" class="fach" value="deu">Deutsch</label>
        <label><input type="checkbox" class="fach" value="eng">Englisch</label>
        <label><input type="checkbox" class="fach" value="lat">Latein</label>
        <label><input type="checkbox" class="fach" value="fra">Franz</label>
        <label><input type="checkbox" class="fach" value="spa">Spanisch</label>
        <label><input type="checkbox" class="fach" value="nwt">NWT</label>
        <label><input type="checkbox" class="fach" value="phy">Physik</label>
        <label><input type="checkbox" class="fach" value="che">Chemie</label>
        <label><input type="checkbox" class="fach" value="bio">Bio</label>
        <label><input type="checkbox" class="fach" value="geo">Geo</label>
        <label><input type="checkbox" class="fach" value="wbs">WBS</label>
        <label><input type="checkbox" class="fach" value="gk">GK</label>
        <label><input type="checkbox" class="fach" value="gesch">Geschichte</label>
    </p>

    <h1>Dateien Hochladen</h1>
   <uc-config ctx-name="my-uploader" source-list="local, camera, gdrive" cloud-image-editor-auto-open="true" pubkey="39df1b37835506464216"></uc-config>
<uc-file-uploader-regular ctx-name="my-uploader" class="uc-light uc-gray"></uc-file-uploader-regular>

    <h3>Arbeiten:</h3>
    <div id="texte">
        <p class="k5 mat hidden" name="arbeit" data-author="piller"><a href="/C:/Users/lukas/Documents/Schule/Englisch/fertig/Tyroller-Lukas-Englisch-Workbook p.45.pdf" target="_blank">Test-Datei</a></p>
        <p class="k5 deu hidden" name="arbeit" data-author="hohn">Test 2</p>
        <p class="k5 eng hidden" name="arbeit" data-author="bauer1">Test 3</p>
        <p class="k10 mat hidden" name="arbeit" data-author="bauer2">Test 4</p>
        <p class="k10 deu hidden" name="arbeit" data-author="piller">Test 5</p>
        <p class="k6 fra hidden" name="arbeit" data-author="bauer1">Test 6</p>
    </div>
    <script type="module">import * as UC from 'https://cdn.jsdelivr.net/npm/@uploadcare/file-uploader@1/web/uc-file-uploader-regular.min.js'; UC.defineComponents(UC);</script>
    <script>
        const klasseRadios = document.querySelectorAll('.klasse');
        const fachCheckboxes = document.querySelectorAll('.fach');
        const texte = document.querySelectorAll('#texte p');

        let aktiveKlasse = null;

        const autorMap = {
            "piller": "Herr Piller",
            "hohn": "Frau Hohn",
            "bauer1": "Herr Bauer (der Alte)",
            "bauer2": "Herr Bauer (der Neue)"
        }

        // Klassen-Filter (erster Schritt)
        klasseRadios.forEach(radio => {
            radio.addEventListener('change', () => {
            aktiveKlasse = radio.value;
            updateAnzeige();
            });
        });

        // Fächer-Filter (zweiter Schritt)
        fachCheckboxes.forEach(cb => {
            cb.addEventListener('change', updateAnzeige);
        });
        
        function updateAnzeige() {
            const aktiveFaecher = Array.from(fachCheckboxes)
            .filter(cb => cb.checked)
            .map(cb => cb.value);

            texte.forEach(p => {
                const passtZurKlasse = aktiveKlasse && p.classList.contains(aktiveKlasse);
                const passtZuFach = aktiveFaecher.length === 0 || aktiveFaecher.some(fach => p.classList.contains(fach));
                const nextElem = p.nextElementSibling;
                if (nextElem && nextElem.classList.contains("beschreibung")) {
                    nextElem.remove();
                }

            if (passtZurKlasse && passtZuFach) {
                p.classList.remove('hidden');
                const beschreibung = document.createElement("p");
                beschreibung.classList.add("beschreibung");
                beschreibung.textContent = "Lehrer: " + (autorMap[p.getAttribute("data-author")] || "unbekannt");
                p.insertAdjacentElement("afterend", beschreibung);
            } 
            else {
                p.classList.add('hidden');
            }
            });
        }
  </script>
</body>
</html>
